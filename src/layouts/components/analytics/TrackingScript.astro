---
// This component loads the tracking script after the page is ready
---

<script is:inline>
  // Auto-track common elements when DOM is loaded
  function initAutoTracking() {
    document.addEventListener('DOMContentLoaded', function() {
      // Auto-track pricing links
      document.querySelectorAll('a[href*="pricing"]').forEach(function(link) {
        link.addEventListener('click', function() {
          if (window.trackPricingView) window.trackPricingView();
        });
      });

      // Auto-track contact links
      document.querySelectorAll('a[href*="contact"]').forEach(function(link) {
        link.addEventListener('click', function() {
          if (window.trackContactForm) window.trackContactForm();
        });
      });

      // Auto-track demo buttons
      document.querySelectorAll('[data-content*="Demo"], [data-content*="demo"]').forEach(function(button) {
        button.addEventListener('click', function() {
          if (window.trackSecurityDemo) window.trackSecurityDemo();
        });
      });

      // Auto-track AI Red Team links
      document.querySelectorAll('a[href*="ai-red-team"]').forEach(function(link) {
        link.addEventListener('click', function() {
          if (window.gtag) {
            window.gtag('event', 'ai_redteam_interest', {
              event_category: 'core_service',
              event_label: 'red_team_engagement',
              value: 5
            });
          }
        });
      });

      // Auto-track video modals
      document.querySelectorAll('.video-modal-toggle').forEach(function(button) {
        button.addEventListener('click', function() {
          if (window.gtag) {
            window.gtag('event', 'video_play', {
              event_category: 'media',
              event_label: 'how_it_works_demo',
              value: 3
            });
          }
        });
      });

      // Track language switches
      document.querySelectorAll('.language-switcher a').forEach(function(link) {
        link.addEventListener('click', function(e) {
          var targetLang = e.target.textContent.trim().toLowerCase();
          var currentLang = document.documentElement.lang || 'en';
          if (window.gtag) {
            window.gtag('event', 'language_switch', {
              event_category: 'user_preference',
              event_label: currentLang + '_to_' + targetLang,
              value: 1
            });
          }
        });
      });

      // Track integration interest
      document.querySelectorAll('a[href*="integration"]').forEach(function(link) {
        link.addEventListener('click', function() {
          if (window.gtag) {
            window.gtag('event', 'integration_interest', {
              event_category: 'technical',
              event_label: 'integration_exploration',
              value: 3
            });
          }
        });
      });

      // Track blog content engagement
      document.querySelectorAll('a[href*="blog"]').forEach(function(link) {
        link.addEventListener('click', function() {
          if (window.gtag) {
            window.gtag('event', 'content_engagement', {
              event_category: 'education',
              event_label: 'cybersecurity_learning',
              value: 2
            });
          }
        });
      });
    });
  }

  // Initialize tracking
  initAutoTracking();
</script>
